# SifterSearch Public Configuration
# Non-sensitive defaults - checked into git
# Override with config.yaml or .env-secrets

# ==============================
# Development Mode
# ==============================
# DEV_MODE=true  → Uses remote AI APIs (OpenAI, Anthropic) for laptop dev
# DEV_MODE=false → Uses local Ollama for production/server
DEV_MODE=true

# ==============================
# Server Ports (Development)
# ==============================
# Dev uses different ports than production to allow both on same machine
# Production: API=3000, UI=4321, Meili=7700
# Development: API=3001, UI=5173, Meili=7701
APP_PORT=5173
API_PORT=3001
MEILI_PORT=7701

# ==============================
# Database
# ==============================
# Local development uses embedded SQLite
TURSO_DATABASE_URL=file:./data/sifter.db
# Production uses Turso cloud (set TURSO_AUTH_TOKEN in .env-secrets)
# TURSO_DATABASE_URL=libsql://siftersearch-chadananda.aws-us-west-2.turso.io

# ==============================
# Search (Meilisearch)
# ==============================
MEILI_HOST=http://localhost:7701
SEARCH_MAX_RESULTS=100
SEARCH_SNIPPET_SIZE=160
SEARCH_TIMEOUT_MS=5000

# ==============================
# AI/LLM Configuration
# ==============================
# These are DEV_MODE defaults (remote APIs)
# Production defaults to Ollama - see api/lib/config.js

# Embeddings (always OpenAI for consistency)
# text-embedding-3-large (3072 dims) for maximum semantic quality
# For a classical religious library, higher dimensions capture nuanced spiritual meanings
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_DIMENSIONS=3072

# Chat/orchestration (dev: OpenAI, prod: Ollama)
CHAT_LLM_PROVIDER=openai
CHAT_LLM_MODEL=gpt-4o
CHAT_LLM_TEMPERATURE=0.7
CHAT_LLM_MAX_TOKENS=1000

# Search enhancement (dev: OpenAI, prod: Ollama)
SEARCH_LLM_PROVIDER=openai
SEARCH_LLM_MODEL=gpt-4o-mini
SEARCH_LLM_TEMPERATURE=0.2
SEARCH_LLM_MAX_TOKENS=500

# Document processing (dev: Anthropic, prod: Ollama)
DOC_LLM_PROVIDER=anthropic
DOC_LLM_MODEL=claude-3-haiku-20240307
DOC_LLM_TEMPERATURE=0.1
DOC_LLM_MAX_TOKENS=2000

# Local Ollama endpoint (for production)
OLLAMA_HOST=http://localhost:11434
OLLAMA_CHAT_MODEL=qwen2.5:32b
OLLAMA_SEARCH_MODEL=qwen2.5:14b

# ==============================
# Authentication
# ==============================
JWT_ACCESS_EXPIRES=15m
JWT_REFRESH_EXPIRES_DAYS=90

# Clerk (public key only)
PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_cHJvcGVyLXB5dGhvbi0zNi5jbGVyay5hY2NvdW50cy5kZXYk

# ==============================
# Email Configuration
# ==============================
# Provider: resend, sendgrid, or console (default for dev)
EMAIL_PROVIDER=console
EMAIL_FROM=SifterSearch <noreply@siftersearch.com>

# ==============================
# Background Jobs
# ==============================
JOB_POLL_INTERVAL=5000
JOB_CLEANUP_INTERVAL=3600000
MAX_CONCURRENT_JOBS=2

# ==============================
# Storage Paths
# ==============================
AUDIO_DIR=./data/audio
TRANSLATION_DIR=./data/translations

# ==============================
# CORS Configuration
# ==============================
CORS_ORIGINS=http://localhost:5173,http://localhost:4321,https://siftersearch.com,https://www.siftersearch.com,https://siftersearch.pages.dev

# ==============================
# Rate Limiting
# ==============================
ENABLE_RATE_LIMITING=false
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# Per-tier limits (requests per minute)
RATE_LIMIT_VERIFIED=10
RATE_LIMIT_APPROVED=60
RATE_LIMIT_PATRON=100
RATE_LIMIT_ADMIN=1000

# ==============================
# Logging
# ==============================
LOG_LEVEL=info

# ==============================
# Application Metadata
# ==============================
APP_NAME=SifterSearch
APP_VERSION=1.0.0
APP_URL=https://siftersearch.com
API_URL=https://api.siftersearch.com
# For dev, override with: PUBLIC_API_URL=http://localhost:3001
PUBLIC_API_URL=http://localhost:3001
SITE_DOMAIN=siftersearch.com
SITE_TITLE=SifterSearch - AI-Powered Interfaith Library

# ==============================
# Analytics
# ==============================
POSTHOG_SITE_KEY=phc_AXeH9HMarlETPWG2IyFbagImec37BU02S9tUsJLBMII

# ==============================
# Public Search API (v1)
# ==============================
# For external applications to access the search API
# API keys should be set in .env-secrets as comma-separated values:
# PUBLIC_API_KEYS=key1,key2,key3
# Generate keys with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
PUBLIC_API_RATE_LIMIT=1000
PUBLIC_API_MAX_RESULTS=50
